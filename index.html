<!DOCTYPE html>
<html>
    <head>
        <title>Virtual-assembly proof of concept</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="library/bootstrap/css/bootstrap.min.css" rel="stylesheet">
        <link href="resources/css/sidebar.css" rel="stylesheet">
        <link href="library/font-awesome/css/font-awesome.min.css" rel="stylesheet">
        <link href="resources/css/av.css" type="text/css" rel="stylesheet" />
        <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
        <script type="text/javascript" src="library/LDP-framework/mystore.js"></script>
        <script type="text/javascript" src="config/config.js"></script>
        <script src="library/bootstrap/js/bootstrap.min.js"></script>
        <script src="resources/js/sidebar.js"></script>

        <!--  ACTORS RELATED TEMPLATES -->
        <script id="actor-item-template" type="text/x-handlebars-template">
            <div>
              <p>
                <a onclick="displayActor('#detail', '{{"@id"}}', $('#actor-detail-template').html());">
                  {{name}}
                </a>
              </p>
            </div>
        </script>

        <script id="actor-detail-template" type="text/x-handlebars-template">
            <div class="actor-detail-active">
              <h1 class="text-center text-uppercase">{{object.name}}</h1>
              <h2>Description</h2>
              <p>{{object.description}}</p>
              <h2>Contribue a</h2>
              <p>
                <ul>
                  <li>
                    <a onclick="displayProject('#detail', '{{object.contributes_to}}', $('#project-detail-template').html());">
                      {{object.contributes_to}}
                    </a>
                  </li>
                </ul>
              </p>
          </div>
        </script>

        <script id="actor-template" type="text/x-handlebars-template">
            <h2 class="text-uppercase">People</h2>
            <div id="actor">
                {{#ldpeach object.ldp:contains "div"}}{{> actorItem }}{{/ldpeach}}
            </div>
        </script>

        <!--  PROJECTS RELATED TEMPLATES -->
        <script id="project-template" type="text/x-handlebars-template">
            <h2 class="text-uppercase">projects</h2>
            <div id="projects">
                {{#ldpeach object.ldp:contains "div"}}{{> projectItem }}{{/ldpeach}}
            </div>
        </script>

        <script id="project-item-template" type="text/x-handlebars-template">
            <div>
              <p>
                <a onclick="displayProject('#detail', '{{"@id"}}', $('#project-detail-template').html())">
                  {{project_title}}
                </a>
              </p>
            </div>
        </script>

        <script id="project-detail-template" type="text/x-handlebars-template">
            <div class="project-detail-active">
              <h1 class="text-center text-uppercase">
                Le projet {{object.project_title}}
              </h1>
              <h2>
                Description du projet
              </h2>
              <p>
                {{object.project_description}}
              </p>
              <h2>Projet de l'initiative de :</h2>
              <p>
                <ul>
                  <li>
                    <a onclick="displayActor('#detail', '{{object.project_contributes}}', $('#actor-detail-template').html());">
                      {{object.project_contributes}}
                    </a>
                  </li>
                </ul>
              </p>
          </div>
        </script>
        <script>
            $(function(){
                window.actorStore = new MyStore({
                    container: config.containerUrl + 'actor/',
                    context: config.contextUrl,
                    template: $("#actor-template").html(),
                    partials: {
                      'actorItem': $("#actor-item-template").html(),
                      'actorDetail': $("#actor-detail-template").html()
                    }
                });
                actorStore.render("#actor-browser");

                window.projectStore = new MyStore({
                  container: config.containerUrl + 'project/',
                  context: config.contextUrl,
                  template: $("#project-template").html(),
                  partials: {
                    'projectItem': $("#project-item-template").html(),
                    'projectDetail': $("#project-detail-template").html()
                  }
                });
                projectStore.render("#project-browser");
            });

            function displayProject(divName, itemId, innerHtml) {
              projectStore.render(divName, itemId, innerHtml);
            }

            function displayActor(divName, itemId, innerHtml) {
              actorStore.render(divName, itemId, innerHtml);
              var actorObject = actorStore.get(itemId);
              console.log(actorObject);
            }
        </script>
    </head>
    <body>
      <div id="wrapper">
        <!-- Sidebar -->
        <div id="sidebar-wrapper">
          <ul class="sidebar-nav nav-pills nav-stacked" id="menu">
            <li class="active">
                <a href="#"><span class="fa-stack fa-lg pull-left"><i class="fa fa-dashboard fa-stack-1x "></i></span></a>
            </li>
            <li>
                <a href="#"><span class="fa-stack fa-lg pull-left"><i class="fa fa-flag fa-stack-1x "></i></span></a>
            </li>
            <li>
                <a href="#"><span class="fa-stack fa-lg pull-left"><i class="fa fa-cloud-download fa-stack-1x "></i></span></a>
            </li>
            <li>
                <a href="#"> <span class="fa-stack fa-lg pull-left"><i class="fa fa-cart-plus fa-stack-1x "></i></span></a>
            </li>
            <li>
                <a href="#"><span class="fa-stack fa-lg pull-left"><i class="fa fa-youtube-play fa-stack-1x "></i></span></a>
            </li>
          </ul>
        </div>
        <div id="content-wrapper">
          <div id="main-container" class="container-fluid">
            <div id="detail-wrapper" class="col-md-9">
                <div id="detail"></div>
            </div>
            <div id="browser" class="col-md-3">
                <div id="actor-browser" class="row"></div>
                <div id="project-browser" class="row"></div>
            </div>
          </div>
        </div>
      </div>
    </body>
</html>
